<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Tabela de vagas</title>
  <style>
  body {
    font-family: sans-serif;
    margin: 0;
    padding: 0;
    font-size: 16px;
    background-color: #2c2c2c;
  }

  #visualizar-container {
    text-align: center;
    margin-bottom: 3px;
    padding: 7px 0;
    background-color: #3f3f3f;
    box-shadow: 0 10px 10px rgba(0, 0, 0, 0.1);
  }

  #conteudo_pdf { 
    width: 210mm;
    margin: 0 auto;
    background: white;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }

  .page {
    padding: 1.5cm;
    position: relative;
    min-height: 297mm;
    box-sizing: border-box;
  }

  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 8px;
    border-bottom: 4px solid #2e7d32;
    margin-bottom: 10px;
  }

  .header-left, .header-right {
    font-size: 16px;
    color: #2e7d32;
    font-weight: bold;
  }

  .logo-container {
    text-align: center;
    margin: 5px 0 15px 0;
  }

  .logo {
    width: 180px;
    display: block;
    margin: 0 auto 5px auto;
  }

  .title {
    text-align: center;
    margin: 10px;
  }

  .title h1 {
    font-size: 22px;
    font-weight: bold;
    color: #2e7d32;
    margin: 0;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
  }

  th {
    background-color: #2e7d32;
    color: white;
    padding: 12px;
    text-align: center;
    font-size: 16px;
    text-transform: uppercase;
  }

  td {
    padding: 12px;
    border: 1px solid #cecece;
    font-size: 15px;
    word-wrap: break-word;
  }

  .vaga-cell {
    font-weight: bold;
    text-transform: uppercase;
    width: 25%;
  }

  .qt-cell {
    font-weight: bold;
    text-transform: uppercase;
    text-align: center;
    width: 10%;
  }

  .descricao-cell {
    width: 65%;
    text-align: justify;
  }

  tr:nth-child(even) {
    background-color: #f8f9fa;
  }

  tr {
    page-break-inside: avoid;
  }

  footer {
    text-align: center;
    font-size: 14px;
    position: absolute;
    /* bottom: 1.5cm; */
    bottom: 1.5cm;
    left: 1.5cm;
    right: 1.5cm;
    margin-top: 10px;
  }

  footer p {
    color: #6b7280;
    line-height: 1.3;
    margin: 4px 0;
  }

  #visualizar {
    background-color: #d42727;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 30px;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    transition: background-color 0.3s;
  }

  #visualizar:hover {
    background-color: #b92222;
  }

  /* Estilos específicos para PDF */
  @media print {
    body {
      background-color: white;
    }
    
    #visualizar-container {
      display: none;
    }
    
    .page {
      min-height: 277mm; /* A4 height - margins */
      height: auto;
      margin: 0;
      padding: 1.5cm;
    }
  }
</style>
</head>
<body>
  <div id="visualizar-container">
    <button id="visualizar">
      <span>Fazer download</span>
    </button>
  </div>

  <div class="container">
    <div id="conteudo_pdf">
      <!-- Página única no HTML -->
      <div class="page">
        <header>
          <div class="header-left">CANAÃ DOS CARAJÁS</div>
          <div class="header-right">SEGUNDA-FEIRA, 10/06/2025 - 8:00 AM</div>
        </header>

        <div class="logo-container">
          <img src="../../themes/sineapp/assets/images/logo-nacional.png" alt="logo-nacional" class="logo">
          <div class="title">
            <h1>Painel de vagas</h1>
          </div>
        </div>

        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th class="vaga-cell">Vaga</th>
                <th class="qt-cell">QT</th>
                <th class="descricao-cell-head">Descrição da Vaga</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="vaga-cell">MECÂNICO DE AERONAVES II</td>
                <td class="qt-cell">40</td>
                <td class="descricao-cell">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</td>
              </tr>
              <tr>
                <td class="vaga-cell">VENDEDOR</td>
                <td class="qt-cell">21</td>
                <td class="descricao-cell">Esse é um exemplo de descrição curta com tamanho não muito grande e uma altura média com relação às outras linhas.</td>
              </tr>
              <tr>
                <td class="vaga-cell">VENDEDOR</td>
                <td class="qt-cell">21</td>
                <td class="descricao-cell">Esse é um exemplo de descrição curta com tamanho não muito grande e uma altura média com relação às outras linhas.</td>
              </tr>
              <tr>
                <td class="vaga-cell">VENDEDOR</td>
                <td class="qt-cell">21</td>
                <td class="descricao-cell">Esse é um exemplo de descrição curta com tamanho não muito grande e uma altura média com relação às outras linhas.</td>
              </tr>
              <tr>
                <td class="vaga-cell">VENDEDOR</td>
                <td class="qt-cell">21</td>
                <td class="descricao-cell">Esse é um exemplo de descrição curta com tamanho não muito grande e uma altura média com relação às outras linhas.</td>
              </tr>
              <tr>
                <td class="vaga-cell">VENDEDOR</td>
                <td class="qt-cell">21</td>
                <td class="descricao-cell">Esse é um exemplo de descrição curta com tamanho não muito grande e uma altura média com relação às outras linhas.</td>
              </tr>
              <tr>
                <td class="vaga-cell">VENDEDOR</td>
                <td class="qt-cell">21</td>
                <td class="descricao-cell">Esse é um exemplo de descrição curta com tamanho não muito grande e uma altura média com relação às outras linhas.</td>
              </tr>
              <tr>
                <td class="vaga-cell">AUXILIAR DE COZINHA III</td>
                <td class="qt-cell">63</td>
                <td class="descricao-cell">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</td>
              </tr>
              <tr>
                <td class="vaga-cell">AEROMOÇA</td>
                <td class="qt-cell">09</td>
                <td class="descricao-cell">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</td>
              </tr>
              <tr>
                <td class="vaga-cell">MECÂNICO DE AERONAVES II</td>
                <td class="qt-cell">40</td>
                <td class="descricao-cell">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</td>
              </tr>
              <tr>
                <td class="vaga-cell">AUXILIAR DE COZINHA III</td>
                <td class="qt-cell">63</td>
                <td class="descricao-cell">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</td>
              </tr>
              <tr>
                <td class="vaga-cell">AEROMOÇA</td>
                <td class="qt-cell">09</td>
                <td class="descricao-cell">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <footer>
          <p>Avenida JK, N° 104, Vale Dourado - CEP: 68.534-149</p>
          <p>Tel. (94) 99123-5373</p>
          <p>Canaã dos Carajás - PA</p>
        </footer>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    document.getElementById('visualizar').addEventListener('click', function () {
      const elemento = document.getElementById('conteudo_pdf');
      
      // Primeiro, vamos clonar o elemento para manipulação
      const elementoClone = elemento.cloneNode(true);
      
      // Dividir a tabela em páginas
      const pages = [];
      const originalPage = elementoClone.querySelector('.page');
      const table = originalPage.querySelector('table');
      const tbody = table.querySelector('tbody');
      const rows = Array.from(tbody.querySelectorAll('tr'));
      const header = originalPage.querySelector('header');
      const logoContainer = originalPage.querySelector('.logo-container');
      const title = originalPage.querySelector('.title');
      const footer = originalPage.querySelector('footer');
      
      // Altura máxima disponível para a tabela (em pixels)
      // Considerando: altura A4 (297mm) - margens (3cm) - cabeçalho - rodapé
      const maxHeightPerPage = 600; // Ajuste este valor conforme necessário
      
      // Criar páginas com grupos de linhas que cabem na altura
      let currentPageRows = [];
      let currentHeight = 0;
      const rowHeight = 200; // Altura estimada por linha (ajuste conforme necessário)
      
      for (let i = 0; i < rows.length; i++) {
        const row = rows[i];
        
        // Verificar se adicionar esta linha ultrapassaria a altura máxima
        if (currentHeight + rowHeight > maxHeightPerPage && currentPageRows.length > 0) {
          // Criar nova página com as linhas acumuladas
          const newPage = originalPage.cloneNode(true);
          const newTbody = newPage.querySelector('tbody');
          newTbody.innerHTML = '';
          currentPageRows.forEach(row => newTbody.appendChild(row.cloneNode(true)));
          pages.push(newPage);
          
          // Resetar para a próxima página
          currentPageRows = [];
          currentHeight = 0;
        }
        
        // Adicionar linha à página atual
        currentPageRows.push(row);
        currentHeight += rowHeight;
      }
      
      // Adicionar a última página se houver linhas restantes
      if (currentPageRows.length > 0) {
        const newPage = originalPage.cloneNode(true);
        const newTbody = newPage.querySelector('tbody');
        newTbody.innerHTML = '';
        currentPageRows.forEach(row => newTbody.appendChild(row.cloneNode(true)));
        pages.push(newPage);
      }
      
      // Substituir o conteúdo original pelas páginas divididas
      elementoClone.innerHTML = '';
      pages.forEach(page => elementoClone.appendChild(page));
      
      // Configurações para o PDF
      const opt = {
        margin: [1.5, 1.5, 1.5, 1.5],
        filename: 'painel_de_vagas.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { 
          scale: 2,
          useCORS: true,
          scrollX: 0,
          scrollY: 0,
          letterRendering: true
        },
        jsPDF: { 
          unit: 'mm',
          format: 'a4',
          orientation: 'portrait'
        },
        pagebreak: {
          mode: ['css', 'legacy'],
          avoid: ['tr', '.page']
        }
      };

      // Gerar o PDF
      html2pdf().set(opt).from(elementoClone).save();
    });
  </script>
</body>
</html>